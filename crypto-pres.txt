Grundläggande krypto och kryptering

Presentation
Namn: Stefan Petersen
Utb: Civilingenjör, Elektro, KTH 92-98
Jobb: egen firma sedan 2008, elektronikkonstr. och programmering
Krypto: Hobbyist


Upplägg:
Enkel bitmatte
Kryptering med hemlig nyckel
Kryptering med öppen nyckel
Hashning
Knäckning 101

För varje ämne kommer jag att prata lite historik,
lite enkelt om hur det fungerar och även lite om "knäckar".
"Knäckar" handlar om hur man försöker hitta fel och hur man 
som obehörig lyckas läsa det hemliga meddelandet.
Kryptografi är viktigt för militära ändamål, vilket kommer att 
visa sig gång på gång.

Enkel bitmatte

Det finns ett helt område inom matematiken för hålla på 
med detta. Det är nåt jag inte är bra på eller har studerat.

Antal bitar...
Nyckellängder = antal bitar i nyckeln.
Decimalt: en siffra till, till exempel 99 till 999 ger ökning av 
antal kombinationer (i detta fall) 900.
Binärt: lägg till en bit och du har helt plötsligt dubbel så många 
kombinationer. 
Detta är viktigt om man försöker undvika att nån kan knäcka kryptot
med rå styrka ("brute force") genom att helt enkelt prova alla nycklar.


EXOR

En ytterst viktig operation som användes i många krypton under andra
världskriget och även i en del "leksakskrypton" idag. Återkommer om detta.

Två nollor in ger en nolla ut
En etta och en nolla in ger en etta ut
Två ettor in ger en nolla ut.
GÖR EN LÄMPLIG BILD!

Kryptering med hemlig nyckel

Detta går ut på att sändare och mottagare har samma nyckel för att utföra 
både kryptering och dekryptering. Detta ger att man måste ha kommit överens
och utbytt nyckel vid ett tidigare tillfälle (delad hemlighet, "shared secret").

Absolut vanligaste sättet att kryptera, dessa krypton är oftast mycket 
"lättviktigare" att använda än de med publik nyckel.

Exempel på denna typ av krypton:
* Substitionskrypto
* Enigma/Lorenz
* DES (56 bitar)
* 3DES (56/112/168 bitar)
* AES  (128/192/256 bitar)


Substitutionskrypto

Korsordskrypto, byt en bokstav mot en annan enligt en tidigare överenskommen
lista. Listan = nyckeln

Enigma/Lorenz

EXOR kryptering

Bild på Enigma

Bild på Lorenz

Tunny

FYLL PÅ MER!

DES Data Encryption Standard

* Var under många år standardkryptot som t.ex. banker använde för sin kommunikation
* Publicerades 1977, standardiserades 1979.
* Konstruktörer var IBM och då var nyckellängden 128 bitar (Lucifer).
* Efter att passerat igenom NSA var nyckellängden nere på 56 bitar.
* EFF "DES cracker" (Deep Crack) som använder "brute force".

Deep Crack

Bild EFF:s innehåller 1856 specialchips för att knäcka DES.
Bilden visar ett dubbelsidigt kretskort från Deep Crack med 64 av
dessa specialgjorda chips.

AES Advanced Encrypion Standard

1997 annonserade NIST att de ville ha en ny standard för kryptering som 
ersättare för DES. 15 förslag lämnades in. Efter en process där man 
vaskar fram det bästa och enklaste kryptot beslöt NIST 2000 att ett
förslag kallat Rijndael skulle bli AES.

Krypto med publik nyckel

Två nycklar
Den publika nyckeln kan man dela ut till alla. Kan endast kryptera meddelandet.
Den hemliga nyckeln får absolut inte delas ut, används för dekryptering.
Kryptering med publik nyckel är en väldigt komplicerad operation som tar
lång tid att beräkna. Därför används det ofta för att dela på en hemlig
nyckel, t.ex. AES, som sedan används för resten av kommunikationen.

1976 föreslog Whitfield Diffie och Martin Hellman ett sätt att utbyta
nycklar utan att tidigare har delat på en hemlig nyckel.
Kryptografi är viktigt för militära ändamål, vilket åter visar sig. 
Malcolm J. Williamson, GCHQ, hade kommit på detta ett par år tidigare, men
var tvungen att hålla det hemligt.

Diffie-Hellman visade hur man utbyter nycklar med denna typ av krypto, men
inte själva algoritmen. Det gjorde tre israeler 1977, Ron Rivest, Adi Shamir och
Leonard Adleman, RSA. Återigen fanns tydligen en engelsman Clifford Cocks, som gjorde
detta 1973, men vars arbete var klassificerat tills 1997.

meddelande -> P -> krypterat -> H -> meddelande

Metoden går att köra "baklänges":
meddelande -> H -> krypterat -> P -> meddelande
Signering
nät-av-förtroende (web-of-trust)
Key Signing Party (senare i eftermiddag)

Både den publika nyckeln och den hemliga nyckeln skapas ur två stora nummer.
Om man har den publika nyckeln och därifrån lyckas räkna ut de två stora
numren som har skapat nyckeln, kan man återskapa den hemliga nyckeln. 
Detta kallas faktoreringsproblemet ("factoring problem"). Här är racet
mellan datorutveckling och antal bitar i kryptot viktig. Den dagen någon
antingen kommer på ett smart sätt att dela upp i dessa två tal eller en
dator som är tillräckligt snabb är loppet över för denna typ av krypto.
I dag, i morgon, om ett år om tio år om 100 år, vem vet?

Hashning

Hashning är inte kryptering, men används mycket inom denna typ av
tillämpningar. Kryptografisk hashning.
Hashning är att ur en stor massa med data skapa ett unikt fingeravtryck.
Minsta bit som ändras i datamassan ska skapa ett nytt fingeravtryck.
Speciellt för kryptografisk hashning:
Man ska inte från en hash kunna återskapa datat (undvika kollisioner).
Genom att jämföra den lokalt genererade hashen med den medskickade
hashen kan man se om någon har varit inne och ändrat i datat.

Det finns många kända algoritmer:
* MD2, MD4, MD5
* SHA-0, SHA-1, SHA-2 samt SHA3 (finns fler).

Vanligast är MD5 samt SHA-1, fast båda är "knäckta". "Knäckt" i
hashningssammanhang innebär oftast att man finna kollisioner "baklänges".
* MD-5 2008
* SHA-1 februari 2005 första attacken och i augusti 2005

SHA-3 blev standard under 2012. Tävling precis som i AES, Keccak var det 
vinnande bidraget. Keccakpresentation på FOSDEM-2013.

"Knäcka krypton"

Finns flera kända sätt att attackera krypton. En definition som dyker upp
när man definerar hur svårt det är att knäcka krypton är hur länge man vill
att det kryoterade ska vara hemlig.
* Frekvensanalys
* Klartextjämförelse
* Rå styrka ("brute force")
* Matematiska bevis

Frekvensanalys

Scoutmeddelande substitutionskrypto ("korsordskrypto")

GSM-krypto

Klartextjämförelse

Enigma/Lorenz/Geheimfernschreiber

Rå styrka

EFF:s "Deep Crack" för att testa alla nyckelkombinationer i ett 56-bitars DES-krypterat
meddelande.

Matematiska bevis

Detta är ett helt eget fält inom matematiken som iallafall är bortom min förståelse.

